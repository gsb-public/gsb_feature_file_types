<?php
/**
 * @file
 * Code for the gsb_feature_file_types feature.
 */

include_once 'gsb_feature_file_types.features.inc';

/**
 * Implements hook_media_token_to_markup_alter()
 * Alter the output generated by Media filter tags.
 */
function gsb_feature_file_types_media_token_to_markup_alter(&$element, $tag_info, $settings) {
  if (isset($element['content']) && $element['content']['#bundle'] == 'image') {
    $file = $element['content']['file']['#file'];
    $show_caption = $file->field_file_image_show_caption['und'];
    if ($show_caption) {
      $alignment = $file->field_file_image_alignment['und'];
      $element['content']['#prefix'] = '<div class="' . $alignment . '">';
      $element['content']['#suffix'] = '</div>';
    }
  }
}
